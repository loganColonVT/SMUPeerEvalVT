"use strict";(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[4105],{17706:(e,t,i)=>{i.r(t),i.d(t,{UserItemsListCarousel:()=>v,default:()=>b});var s=i(68651),o=i(67373),r=i(17228),n=i(75396),l=i(79287),a=i(28408),d=i(63285),h=i(9330),c=i(29762),u=i(28058);function m(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=0;const S=20,w="px",g=576;class v extends o.A{constructor(e){super(),m(this,"getResponsiveSpaceBetweenSlides",(e=>{let{spaceValue:t,spaceUnit:i}=e;return window.innerWidth<g&&(t=S,i=w),{value:t,unit:i}})),m(this,"getStateFromDOM",(()=>{const e=JSON.parse(this.node.dataset.currentContext),t=Object.assign({},e);return t.userItems.forEach((e=>{e.image&&(e.imageId=e.image.id,delete e.image)})),t})),m(this,"loadImage",(e=>{e&&(e.onload=()=>{e.dataset.loaded=!0},r.A.loadLazy(e,{load:!0,useAdvancedPositioning:!0}))})),m(this,"updateRef",(()=>{const{itemSelector:e,imageSelector:t,contentSelector:i,mediaSelector:s,mediaInnerSelector:o,slidesContainerSelector:r,arrowLeftWrapperSelector:n,arrowRightWrapperSelector:l,arrowsBottomSelector:a,parentSectionSelector:d,listWrapperSelector:h,itemTitleSelector:c,itemDescriptionSelector:u,itemButtonSelector:m,itemButtonContainerSelector:p,listTitleSelector:S,listButtonWrapperSelector:w,listButtonSelector:g}=this.props;return{layoutContainer:this.node,userItems:Array.from(this.node.querySelectorAll(e)),images:Array.from(this.node.querySelectorAll(t)),contentContainers:Array.from(this.node.querySelectorAll(i)),mediaContainers:Array.from(this.node.querySelectorAll(s)),mediaInnerContainers:Array.from(this.node.querySelectorAll(o)),slidesContainer:this.node.querySelector(r),arrowLeftWrapper:this.node.querySelector(n),arrowRightWrapper:this.node.querySelector(l),arrowsBottom:this.node.querySelector(a),parentNode:this.node.closest(d),listWrapperElement:this.node.closest(h),itemTitles:Array.from(this.node.querySelectorAll(c)),itemDescriptions:Array.from(this.node.querySelectorAll(u)),itemButtons:Array.from(this.node.querySelectorAll(m)),itemButtonContainers:Array.from(this.node.querySelectorAll(p)),listTitleElement:this.node.parentElement.querySelector(S),listButtonWrapper:this.node.parentElement.querySelector(w),listButtonElement:this.node.parentElement.querySelector(g)}})),m(this,"updateRefCloneItems",(()=>{this.ref=this.updateRef()})),m(this,"handleArrowVisibility",(()=>{if(!this.isInfiniteEnabled&&"arrows"===this.navigationControls){if(this.slideshowProps.totalSlideCount<=this.getSlideColumnCount())return this.hideArrow(this.previousBtn),void this.hideArrow(this.nextBtn);this.slideshowProps.targetSlideIndex<=0?this.hideArrow(this.previousBtn):this.showArrow(this.previousBtn),this.slideshowProps.targetSlideIndex>=this.behaviors.getLastScrollableSlideIndex()?this.hideArrow(this.nextBtn):this.showArrow(this.nextBtn)}})),m(this,"onResize",(()=>{const e=this.getSlideColumnCount();this.removeClones(),this.slideshowNodes=this.buildItems(this.slides),this.list.props.items=this.slideshowNodes,this.loadImages(this.ref.images),this.list.props.slideshowGutterWidth=this.getSlideshowGutterWidth(),this.list.props.slideColumnCount=e,this.behaviors&&(this.behaviors.props.slideColumnCount=e),this.list.props.spacing=this.getResponsiveSpaceBetweenSlides({spaceValue:this.spaceBetweenSlidesValue,spaceUnit:this.spaceBetweenSlidesUnit}),this.list.setSize(this.getSlideshowDimensions()),this.updatePositions(),this.slideshowProps.targetSlideIndex=this.slideshowProps.progressIndex,this.handleArrowVisibility()})),m(this,"removeClones",(()=>{this.slidesContainer.innerHTML="";const e=new DocumentFragment;this.slides.forEach((t=>{e.appendChild(t)})),this.slidesContainer.appendChild(e)})),m(this,"onClickNavPrevious",(()=>{this.behaviors.previousIndex()})),m(this,"onClickNavNext",(()=>{this.behaviors.nextIndex()})),m(this,"onProgress",(e=>{this.slideshowProps.progressIndex=(.5+e|0)%this.slideshowProps.totalSlideCount,this.list.setProgress(e),this.updatePositions()})),m(this,"onStartProgress",(e=>{if(this.slideshowProps.targetSlideIndex=e,this.handleArrowVisibility(),!this.dragBehaviors.isDragging){const t=this.slideshowNodes.length,i=Math.round((e+t)%t);this.updateAriaContainer({currentSlideIndex:i})}})),m(this,"onCloneItem",(e=>{const t=this.slideshowNodes[e],i=t.node.parentNode,s=t.node.cloneNode(!0);s.querySelectorAll("h1, h2, h3, h4, h5, p, [data-animation-role]").forEach((e=>{(0,l.x)(e),e.classList.remove(a.g)})),(0,l.x)(s);const o=s.querySelector(this.nodeSelectors.slideshowItemImage);s.dataset.originalItemIndex=t.index,i.appendChild(s),this.slideshowNodes.push({...t,node:s,imageNode:o,isImageLoadAdded:!1,inViewport:null}),this.loadImage(o)})),this.node=e,this.shouldShowAdjacentSlides="true"===e.getAttribute("data-show-adjacent-slides"),this.isInfiniteEnabled="true"===e.getAttribute("data-is-infinite-enabled"),this.spaceBetweenSlidesValue=Number(e.getAttribute("data-space-between-slides-value")),this.spaceBetweenSlidesUnit=e.getAttribute("data-space-between-slides-unit"),this.maxColumns=e.getAttribute("data-max-columns"),this.navigationControls=e.getAttribute("data-navigation-controls"),this.nodeSelectors={slideshowWidthConstrainer:".user-items-list-carousel__gutter",slidesContainer:".user-items-list-carousel__slides",slide:".user-items-list-carousel__slide",slideshowItemImage:".user-items-list-carousel__media",previousBtn:".user-items-list-carousel__arrow-button--left",nextBtn:".user-items-list-carousel__arrow-button--right",previousBtnMobile:".mobile-arrow-button--left",nextBtnMobile:".mobile-arrow-button--right"},this.classNames={isSlideshowInitialized:"user-items-list-carousel__slides--initialized",isArrowHidden:"user-items-list-carousel__arrow-button--hidden"};const{unorderedListSelector:t,itemSelector:i,imageSelector:s,contentSelector:o,mediaSelector:n,mediaInnerSelector:d,slidesContainerSelector:h,arrowLeftWrapperSelector:c,arrowRightWrapperSelector:u,parentSectionSelector:v,itemTitleSelector:b,itemDescriptionSelector:C,itemButtonSelector:y,itemButtonContainerSelector:A,listWrapperSelector:f,listTitleSelector:B,listButtonWrapperSelector:I,listButtonSelector:x,arrowsBottomSelector:W}=this.props;this.ref={unorderedList:this.node.querySelector(t),layoutContainer:this.node,userItems:Array.from(this.node.querySelectorAll(i)),images:Array.from(this.node.querySelectorAll(s)),contentContainers:Array.from(this.node.querySelectorAll(o)),mediaContainers:Array.from(this.node.querySelectorAll(n)),mediaInnerContainers:Array.from(this.node.querySelectorAll(d)),slidesContainer:this.node.querySelector(h),arrowLeftWrapper:this.node.querySelector(c),arrowRightWrapper:this.node.querySelector(u),arrowsBottom:this.node.querySelector(W),itemTitles:Array.from(this.node.querySelectorAll(b)),itemDescriptions:Array.from(this.node.querySelectorAll(C)),itemButtons:Array.from(this.node.querySelectorAll(y)),itemButtonContainers:Array.from(this.node.querySelectorAll(A)),parentNode:this.node.closest(v),listWrapperElement:this.node.closest(f),listTitleElement:this.node.parentElement.querySelector(B),listButtonWrapper:this.node.parentElement.querySelector(I),listButtonElement:this.node.parentElement.querySelector(x)},this.sectionId=this.node.dataset.sectionId,this.state=this.getStateFromDOM(),this.initializeSlideshowDom(),this.initializeSlideshowBehaviors(),this.initializeSlideshowProperties(),this.initializeDragBehaviors(),this.initializeSlideshow(),this.behaviors.setIndex(p,{isInstant:!0})}loadImages(e){e.forEach(this.loadImage)}addAriaContainer(e){let{targetElement:t}=e;const i=document.createElement("div");i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.setAttribute("style","position: absolute; pointer-events: none; opacity: 0;"),t.appendChild(i),this.ariaContainer=i}updateAriaContainer(e){let{currentSlideIndex:t}=e;const i=this.slideshowNodes.length;this.ariaContainer.innerHTML=`Item ${t+1} of ${i}`}initializeSlideshowDom(){this.loadImages(this.ref.images),this.slideshowWidthConstrainer=this.node.querySelector(this.nodeSelectors.slideshowWidthConstrainer),this.slidesContainer=this.node.querySelector(this.nodeSelectors.slidesContainer),this.previousBtn=this.node.querySelector(this.nodeSelectors.previousBtn),this.nextBtn=this.node.querySelector(this.nodeSelectors.nextBtn),this.previousBtnMobile=this.node.querySelector(this.nodeSelectors.previousBtnMobile),this.nextBtnMobile=this.node.querySelector(this.nodeSelectors.nextBtnMobile),this.slides=Array.from(this.node.querySelectorAll(this.nodeSelectors.slide)),this.slideshowNodes=this.buildItems(this.slides),this.addAriaContainer({targetElement:this.slideshowWidthConstrainer})}initializeSlideshowBehaviors(){this.behaviors=new h.A({nodes:{focus:this.slideshowWidthConstrainer},numSlides:this.slideshowNodes.length,slideColumnCount:this.getSlideColumnCount(),isAutoplay:!1,autoplayInterval:3e3,isInfinite:this.isInfiniteEnabled,transitionDuration:250,onProgress:this.onProgress,onStartProgress:this.onStartProgress,shouldStopNavAtEnds:!0}),this.list=new u.A({items:this.slideshowNodes,...this.getSlideshowDimensions(),spacing:this.getResponsiveSpaceBetweenSlides({spaceValue:this.spaceBetweenSlidesValue,spaceUnit:this.spaceBetweenSlidesUnit}),isInfinite:this.isInfiniteEnabled,onCloneItem:this.onCloneItem,slideshowGutterWidth:this.getSlideshowGutterWidth(),onRedraw:this.updateRefCloneItems})}destroySlideshow(){this.behaviors&&this.behaviors.destroy(),this.list&&this.list.destroy()}initializeSlideshowProperties(){this.slideshowProps={slideDimensions:this.list.props.items[0],totalSlideCount:this.slideshowNodes.length,progress:0,progressIndex:0,targetSlideIndex:0}}initializeDragBehaviors(){const e=this.node.querySelector(this.nodeSelectors.slideshowWidthConstrainer);this.dragBehaviors=new c.A(e,{slideshowProps:this.slideshowProps,behaviors:this.behaviors,callback:this.handleArrowVisibility})}initializeSlideshow(){this.updatePositions(),this.slidesContainer.classList.add(this.classNames.isSlideshowInitialized),this.bindListeners(),this.handleArrowVisibility(),this.updateAriaContainer({currentSlideIndex:0})}hideArrow(e){e&&(e.classList.add(this.classNames.isArrowHidden),e.setAttribute("tabindex","-1"),e.setAttribute("data-override-initial-global-animation",""))}showArrow(e){e&&(e.classList.remove(this.classNames.isArrowHidden),e.setAttribute("tabindex","0"),e.removeAttribute("data-override-initial-global-animation"))}getSlideColumnCount(){const e=window.innerWidth;let t=1;return Object.values({"breakpoint-up-sm":{minScreenWidth:576,columnsWeHaveRoomFor:2},"breakpoint-up-lg":{minScreenWidth:992,columnsWeHaveRoomFor:3},"breakpoint-up-xxl":{minScreenWidth:1200,columnsWeHaveRoomFor:4}}).forEach((i=>{e>=i.minScreenWidth&&(t=Math.min(i.columnsWeHaveRoomFor,this.maxColumns))})),t}getSlideshowGutterWidth(){const e=this.slidesContainer.getBoundingClientRect();return this.slidesContainer.offsetWidth/e.width*(e.x-this.slideshowWidthConstrainer.getBoundingClientRect().x)}bindListeners(){var e,t,i,o;"none"!==this.state.options.navigationControls&&(null===(i=this.previousBtn)||void 0===i||i.addEventListener("click",this.onClickNavPrevious),null===(o=this.nextBtn)||void 0===o||o.addEventListener("click",this.onClickNavNext));null===(e=this.previousBtnMobile)||void 0===e||e.addEventListener("click",this.onClickNavPrevious),null===(t=this.nextBtnMobile)||void 0===t||t.addEventListener("click",this.onClickNavNext),this.onResize=(0,n.A)(this.onResize,d.X0),s.A.on(this.onResize)}unbindListeners(){var e,t,i,o;"none"!==this.state.options.navigationControls&&(null===(i=this.previousBtn)||void 0===i||i.removeEventListener("click",this.onClickNavPrevious),null===(o=this.nextBtn)||void 0===o||o.removeEventListener("click",this.onClickNavNext));null===(e=this.previousBtnMobile)||void 0===e||e.removeEventListener("click",this.onClickNavPrevious),null===(t=this.nextBtnMobile)||void 0===t||t.removeEventListener("click",this.onClickNavNext),s.A.off(this.onResize)}getSlideshowDimensions(){const e=this.slideshowWidthConstrainer.offsetWidth,t=this.slideshowWidthConstrainer.offsetHeight;return{regionWidth:e,regionHeight:t,maxWidth:e,maxHeight:t}}setItemIndex(e){for(let t=0;t<e.length;t++)if(e[t].length){p!==t&&(p=t,this.behaviors.setIndex(p))}}buildItems(e){return e.map(((e,t)=>({width:e.offsetWidth,height:e.offsetHeight,index:t,node:e,imageNode:e.querySelector(this.nodeSelectors.slideshowItemImage),isImageLoadAdded:!1,inViewport:null})))}updatePositions(){const e=[];for(let t=0,i=this.slideshowNodes.length;t<i;t+=1){const i=this.slideshowNodes[t],s=this.list.items[t],o=!s.inViewport,r=i.inViewport!==s.inViewport;o?i.node.setAttribute("aria-hidden",!0):(i.node.removeAttribute("aria-hidden"),e.push(i.node)),(i.inViewport||r)&&(i.node.style.transform="translate3d("+s.x+"px, 0, 0)",i.inViewport=s.inViewport)}}destroy(){this.behaviors&&(this.behaviors.destroy(),delete this.behaviors),this.dragBehaviors&&(this.dragBehaviors.destroy(),delete this.dragBehaviors),this.unbindListeners()}}m(v,"defaultProps",{unorderedListSelector:".user-items-list-carousel__slides",itemSelector:".list-item",imageSelector:"img",contentSelector:".list-item-content",mediaSelector:".user-items-list-carousel__media-container",mediaInnerSelector:".user-items-list-carousel__media-inner",itemTitleSelector:".list-item-content__title",itemDescriptionSelector:".list-item-content__description",itemButtonContainerSelector:".list-item-content__button-container",itemButtonSelector:".list-item-content__button",slidesContainerSelector:".user-items-list-carousel__slides",arrowLeftWrapperSelector:".user-items-list-carousel__arrow-wrapper--left",arrowRightWrapperSelector:".user-items-list-carousel__arrow-wrapper--right",arrowContainerSelector:".user-items-list-carousel__arrow-container",arrowPositionerSelector:".user-items-list-carousel__arrow-positioner",parentSectionSelector:".user-items-list-section",listWrapperSelector:".user-items-list",hideElementClass:"list-item-content--hidden",listTitleSelector:".list-section-title",listButtonWrapperSelector:".list-section-button-container",listButtonSelector:".list-section-button",arrowsBottomSelector:".arrows-bottom-wrapper"});const b=e=>new v(e)}}]);